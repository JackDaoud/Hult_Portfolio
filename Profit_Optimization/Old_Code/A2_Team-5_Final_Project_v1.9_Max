{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-26T00:01:18.103553Z",
     "start_time": "2021-03-26T00:01:18.096395Z"
    }
   },
   "source": [
    "<hr style=\"height:.9px;border:none;color:#333;background-color:#333;\" />\n",
    "<hr style=\"height:.9px;border:none;color:#333;background-color:#333;\" />\n",
    "<br><br><br><br><br>\n",
    "<u><b><font size = 6>A2: Team Project OJ </f></b></u><br><br>\n",
    "<b><font size = 5> Data Optimization - DAT-5304 </f></b>\n",
    "<br><br>\n",
    "<b>Authors</b>          : Carolina Novello Moreira, Jack Daoud & Max Lembke <br>\n",
    "<b>Date Created</b> : 03/24/2021<br>\n",
    "<br><br><br><br><br>\n",
    "<hr style=\"height:.9px;border:none;color:#333;background-color:#333;\" />\n",
    "<hr style=\"height:.9px;border:none;color:#333;background-color:#333;\" />\n",
    "<br>\n",
    "\n",
    "\n",
    "<b><font size = 5> Instructions </f></b>\n",
    "\n",
    "This option involves using one of the two real-world datasets that I posted on Canvas. These datasets have information on Unit Sales, Prices, and Gross Margins for several SKU’s (Stock Keeping Units). The OJ Data is from Dominik’s Grocery Store in Chicago. The Milk Dataset is from Peru. Both have weekly data for multiple years. Using this data, you should advise management as to what they should do. Your advice could include marketing strategies (feature and display in OJ Dataset or Loyalty Card usage in Milk Dataset). Some suggestions or ideas are to: \n",
    "\n",
    "1.\tEstimate Quantity Demanded as a function of price (and similar prices) using a Log Transformation. You can also include marketing strategies in your regression.\n",
    "2.\tCombine Gross Margin information to advise the firm on maximizing profits. To avoid sales cannibalization, simultaneously include multiple products. Depending on how you set this up, you might be able to use Solver in Excel to fin the optimal strategy. It is a NLP.\n",
    "3.\tThe estimates of margins and demand are only estimates. Perform Monte Carlo analysis to simulate different strategies even if your estimate is not perfect (draw the regression coefficients from a normal with mean = estimate and standard deviation = standard error). Report on the results from these simulations."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Set-up "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:47.021652Z",
     "start_time": "2021-03-27T20:01:46.076150Z"
    }
   },
   "outputs": [],
   "source": [
    "# import packages \n",
    "import pandas as pd #pandas \n",
    "import numpy  as np #numpy \n",
    "from numpy import arange # for ranges with floats\n",
    "import statsmodels.formula.api as smf # predictive modeling with nice outputs\n",
    "import matplotlib.pyplot as plt\n",
    "import seaborn as sns\n",
    "\n",
    "# set options \n",
    "pd.set_option(\"display.max_rows\", 999)\n",
    "pd.set_option(\"display.max_columns\", 50)\n",
    "\n",
    "# importing file \n",
    "df = pd.read_excel('OJ_Data.xlsx')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:47.028560Z",
     "start_time": "2021-03-27T20:01:47.023410Z"
    },
    "code_folding": []
   },
   "outputs": [],
   "source": [
    "# Helper functions \n",
    "\n",
    "# Make binary function \n",
    "def make_binary(df):\n",
    "    \n",
    "    for col in df.columns:\n",
    "        \n",
    "        if 'feat' in col \\\n",
    "        or 'disp' in col:\n",
    "            \n",
    "            for index, value in df.iterrows():\n",
    "                \n",
    "                if df.loc[index, col] >= 0.5:\n",
    "                    df.loc[index, col] = 1\n",
    "                else:\n",
    "                    df.loc[index, col] = 0\n",
    "        \n",
    "            df[col] = df[col].astype(int)\n",
    "\n",
    "\n",
    "# Shuffle dataframe function\n",
    "def shuffle(df, n = 1, axis = 0):     \n",
    "    df = df.copy()\n",
    "    for _ in range(n):\n",
    "        df.apply(np.random.shuffle, axis = axis)\n",
    "        return df\n",
    "\n",
    "# Source:\n",
    "# https://stackoverflow.com/questions/15772009/shuffling-permutating-a-dataframe-in-pandas"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:47.860324Z",
     "start_time": "2021-03-27T20:01:47.030128Z"
    }
   },
   "outputs": [],
   "source": [
    "# Data cleaning \n",
    "\n",
    "# Clean binary variables\n",
    "make_binary(df)\n",
    "\n",
    "\n",
    "# Log transformations \n",
    "\n",
    "# price\n",
    "df['log_price1'] = np.log10(df['price1'])\n",
    "df['log_price2'] = np.log10(df['price2'])\n",
    "df['log_price3'] = np.log10(df['price3'])\n",
    "df['log_price4'] = np.log10(df['price4'])\n",
    "df['log_price5'] = np.log10(df['price5'])\n",
    "\n",
    "# sales\n",
    "df['log_sales1'] = np.log10(df['sales1'])\n",
    "df['log_sales2'] = np.log10(df['sales2'])\n",
    "df['log_sales3'] = np.log10(df['sales3'])\n",
    "df['log_sales4'] = np.log10(df['sales4'])\n",
    "df['log_sales5'] = np.log10(df['sales5'])"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Part 1: Regression "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Product 1: Tropicana Premium 64 oz"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:47.887794Z",
     "start_time": "2021-03-27T20:01:47.861935Z"
    },
    "scrolled": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "                            OLS Regression Results                            \n",
      "==============================================================================\n",
      "Dep. Variable:             log_sales1   R-squared:                       0.794\n",
      "Model:                            OLS   Adj. R-squared:                  0.781\n",
      "Method:                 Least Squares   F-statistic:                     59.46\n",
      "Date:                Sat, 27 Mar 2021   Prob (F-statistic):           3.56e-34\n",
      "Time:                        16:01:47   Log-Likelihood:                 57.156\n",
      "No. Observations:                 116   AIC:                            -98.31\n",
      "Df Residuals:                     108   BIC:                            -76.28\n",
      "Df Model:                           7                                         \n",
      "Covariance Type:            nonrobust                                         \n",
      "==============================================================================\n",
      "                 coef    std err          t      P>|t|      [0.025      0.975]\n",
      "------------------------------------------------------------------------------\n",
      "Intercept      1.4345      0.482      2.977      0.004       0.479       2.390\n",
      "log_price1    -2.6540      0.232    -11.432      0.000      -3.114      -2.194\n",
      "log_price2     0.1441      0.317      0.455      0.650      -0.483       0.772\n",
      "log_price3     0.5562      0.185      3.008      0.003       0.190       0.923\n",
      "log_price4    -0.0630      0.202     -0.311      0.756      -0.464       0.338\n",
      "log_price5     0.0250      0.157      0.160      0.874      -0.286       0.336\n",
      "disp1         -0.0114      0.039     -0.289      0.773      -0.089       0.067\n",
      "feat1          0.2797      0.042      6.640      0.000       0.196       0.363\n",
      "==============================================================================\n",
      "Omnibus:                        5.601   Durbin-Watson:                   1.733\n",
      "Prob(Omnibus):                  0.061   Jarque-Bera (JB):                8.622\n",
      "Skew:                           0.010   Prob(JB):                       0.0134\n",
      "Kurtosis:                       4.335   Cond. No.                         123.\n",
      "==============================================================================\n",
      "\n",
      "Notes:\n",
      "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n"
     ]
    }
   ],
   "source": [
    "# step 1: build a model\n",
    "lm_best = smf.ols(formula =  \"\"\"log_sales1 ~ log_price1 +\n",
    "                                        log_price2 +\n",
    "                                        log_price3 +\n",
    "                                        log_price4 +\n",
    "                                        log_price5 +\n",
    "                                        disp1 +\n",
    "                                        feat1\"\"\",\n",
    "                                        data = df)\n",
    "\n",
    "\n",
    "# step 2: fit the model based on the data\n",
    "results_1 = lm_best.fit()\n",
    "\n",
    "# step 3: analyze the summary output\n",
    "print(results_1.summary())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:47.911778Z",
     "start_time": "2021-03-27T20:01:47.889633Z"
    }
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "                            OLS Regression Results                            \n",
      "==============================================================================\n",
      "Dep. Variable:             log_sales1   R-squared:                       0.794\n",
      "Model:                            OLS   Adj. R-squared:                  0.781\n",
      "Method:                 Least Squares   F-statistic:                     59.46\n",
      "Date:                Sat, 27 Mar 2021   Prob (F-statistic):           3.56e-34\n",
      "Time:                        16:01:47   Log-Likelihood:                 57.156\n",
      "No. Observations:                 116   AIC:                            -98.31\n",
      "Df Residuals:                     108   BIC:                            -76.28\n",
      "Df Model:                           7                                         \n",
      "Covariance Type:            nonrobust                                         \n",
      "==============================================================================\n",
      "                 coef    std err          t      P>|t|      [0.025      0.975]\n",
      "------------------------------------------------------------------------------\n",
      "Intercept      1.4345      0.482      2.977      0.004       0.479       2.390\n",
      "log_price1    -2.6540      0.232    -11.432      0.000      -3.114      -2.194\n",
      "log_price2     0.1441      0.317      0.455      0.650      -0.483       0.772\n",
      "log_price3     0.5562      0.185      3.008      0.003       0.190       0.923\n",
      "log_price4    -0.0630      0.202     -0.311      0.756      -0.464       0.338\n",
      "log_price5     0.0250      0.157      0.160      0.874      -0.286       0.336\n",
      "disp1         -0.0114      0.039     -0.289      0.773      -0.089       0.067\n",
      "feat1          0.2797      0.042      6.640      0.000       0.196       0.363\n",
      "==============================================================================\n",
      "Omnibus:                        5.601   Durbin-Watson:                   1.733\n",
      "Prob(Omnibus):                  0.061   Jarque-Bera (JB):                8.622\n",
      "Skew:                           0.010   Prob(JB):                       0.0134\n",
      "Kurtosis:                       4.335   Cond. No.                         123.\n",
      "==============================================================================\n",
      "\n",
      "Notes:\n",
      "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n"
     ]
    }
   ],
   "source": [
    "# Re-running the the regression without variables with p-values above 0.05\n",
    "\n",
    "# step 1: build a model\n",
    "lm_best = smf.ols(formula =  \"\"\"log_sales1 ~ log_price1 +\n",
    "                                        log_price3 +\n",
    "                                        disp1 +\n",
    "                                        feat1\"\"\",\n",
    "                                        data = df)\n",
    "\n",
    "\n",
    "# step 2: fit the model based on the data\n",
    "results_1_opt = lm_best.fit()\n",
    "\n",
    "# step 3: analyze the summary output\n",
    "print(results_1.summary())"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Product 2: Tropicana Premium 96 oz"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:47.939380Z",
     "start_time": "2021-03-27T20:01:47.915136Z"
    }
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "                            OLS Regression Results                            \n",
      "==============================================================================\n",
      "Dep. Variable:             log_sales2   R-squared:                       0.558\n",
      "Model:                            OLS   Adj. R-squared:                  0.530\n",
      "Method:                 Least Squares   F-statistic:                     19.51\n",
      "Date:                Sat, 27 Mar 2021   Prob (F-statistic):           1.15e-16\n",
      "Time:                        16:01:47   Log-Likelihood:                 108.06\n",
      "No. Observations:                 116   AIC:                            -200.1\n",
      "Df Residuals:                     108   BIC:                            -178.1\n",
      "Df Model:                           7                                         \n",
      "Covariance Type:            nonrobust                                         \n",
      "==============================================================================\n",
      "                 coef    std err          t      P>|t|      [0.025      0.975]\n",
      "------------------------------------------------------------------------------\n",
      "Intercept      2.2913      0.317      7.225      0.000       1.663       2.920\n",
      "log_price1     0.3283      0.112      2.933      0.004       0.106       0.550\n",
      "log_price2    -1.5455      0.242     -6.395      0.000      -2.025      -1.066\n",
      "log_price3     0.0490      0.119      0.411      0.682      -0.187       0.286\n",
      "log_price4    -0.0348      0.133     -0.262      0.794      -0.299       0.229\n",
      "log_price5    -0.1156      0.101     -1.143      0.256      -0.316       0.085\n",
      "disp2          0.0162      0.025      0.644      0.521      -0.034       0.066\n",
      "feat2          0.1296      0.031      4.159      0.000       0.068       0.191\n",
      "==============================================================================\n",
      "Omnibus:                        0.793   Durbin-Watson:                   1.237\n",
      "Prob(Omnibus):                  0.673   Jarque-Bera (JB):                0.375\n",
      "Skew:                           0.008   Prob(JB):                        0.829\n",
      "Kurtosis:                       3.278   Cond. No.                         131.\n",
      "==============================================================================\n",
      "\n",
      "Notes:\n",
      "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n"
     ]
    }
   ],
   "source": [
    "# step 1: build a model\n",
    "lm_best = smf.ols(formula =  \"\"\"log_sales2 ~ log_price1 +\n",
    "                                        log_price2 +\n",
    "                                        log_price3 +\n",
    "                                        log_price4 +\n",
    "                                        log_price5 +\n",
    "                                        disp2 +\n",
    "                                        feat2\"\"\",\n",
    "                                        data = df)\n",
    "\n",
    "\n",
    "# step 2: fit the model based on the data\n",
    "results_2 = lm_best.fit()\n",
    "\n",
    "# step 3: analyze the summary output\n",
    "print(results_2.summary())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:47.962152Z",
     "start_time": "2021-03-27T20:01:47.942148Z"
    },
    "scrolled": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "                            OLS Regression Results                            \n",
      "==============================================================================\n",
      "Dep. Variable:             log_sales2   R-squared:                       0.558\n",
      "Model:                            OLS   Adj. R-squared:                  0.530\n",
      "Method:                 Least Squares   F-statistic:                     19.51\n",
      "Date:                Sat, 27 Mar 2021   Prob (F-statistic):           1.15e-16\n",
      "Time:                        16:01:47   Log-Likelihood:                 108.06\n",
      "No. Observations:                 116   AIC:                            -200.1\n",
      "Df Residuals:                     108   BIC:                            -178.1\n",
      "Df Model:                           7                                         \n",
      "Covariance Type:            nonrobust                                         \n",
      "==============================================================================\n",
      "                 coef    std err          t      P>|t|      [0.025      0.975]\n",
      "------------------------------------------------------------------------------\n",
      "Intercept      2.2913      0.317      7.225      0.000       1.663       2.920\n",
      "log_price1     0.3283      0.112      2.933      0.004       0.106       0.550\n",
      "log_price2    -1.5455      0.242     -6.395      0.000      -2.025      -1.066\n",
      "log_price3     0.0490      0.119      0.411      0.682      -0.187       0.286\n",
      "log_price4    -0.0348      0.133     -0.262      0.794      -0.299       0.229\n",
      "log_price5    -0.1156      0.101     -1.143      0.256      -0.316       0.085\n",
      "disp2          0.0162      0.025      0.644      0.521      -0.034       0.066\n",
      "feat2          0.1296      0.031      4.159      0.000       0.068       0.191\n",
      "==============================================================================\n",
      "Omnibus:                        0.793   Durbin-Watson:                   1.237\n",
      "Prob(Omnibus):                  0.673   Jarque-Bera (JB):                0.375\n",
      "Skew:                           0.008   Prob(JB):                        0.829\n",
      "Kurtosis:                       3.278   Cond. No.                         131.\n",
      "==============================================================================\n",
      "\n",
      "Notes:\n",
      "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n"
     ]
    }
   ],
   "source": [
    "# Re-running the the regression without variables with p-values above 0.05\n",
    "\n",
    "# step 1: build a model\n",
    "lm_best = smf.ols(formula =  \"\"\"log_sales2 ~ log_price1 +\n",
    "                                        log_price2 +\n",
    "                                        disp2 +\n",
    "                                        feat2\"\"\",\n",
    "                                        data = df)\n",
    "\n",
    "\n",
    "# step 2: fit the model based on the data\n",
    "results_2_opt = lm_best.fit()\n",
    "\n",
    "# step 3: analyze the summary output\n",
    "print(results_2.summary())"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Product 3: Topicana 64 oz"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:47.989966Z",
     "start_time": "2021-03-27T20:01:47.963910Z"
    },
    "scrolled": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "                            OLS Regression Results                            \n",
      "==============================================================================\n",
      "Dep. Variable:             log_sales3   R-squared:                       0.712\n",
      "Model:                            OLS   Adj. R-squared:                  0.694\n",
      "Method:                 Least Squares   F-statistic:                     38.20\n",
      "Date:                Sat, 27 Mar 2021   Prob (F-statistic):           1.85e-26\n",
      "Time:                        16:01:47   Log-Likelihood:                -30.148\n",
      "No. Observations:                 116   AIC:                             76.30\n",
      "Df Residuals:                     108   BIC:                             98.32\n",
      "Df Model:                           7                                         \n",
      "Covariance Type:            nonrobust                                         \n",
      "==============================================================================\n",
      "                 coef    std err          t      P>|t|      [0.025      0.975]\n",
      "------------------------------------------------------------------------------\n",
      "Intercept      2.3313      1.077      2.164      0.033       0.196       4.467\n",
      "log_price1     1.1542      0.364      3.168      0.002       0.432       1.876\n",
      "log_price2     1.0704      0.662      1.618      0.109      -0.241       2.382\n",
      "log_price3    -4.4184      0.474     -9.324      0.000      -5.358      -3.479\n",
      "log_price4     1.4386      0.457      3.151      0.002       0.534       2.344\n",
      "log_price5     0.0745      0.333      0.224      0.824      -0.586       0.735\n",
      "disp3          0.0879      0.074      1.186      0.238      -0.059       0.235\n",
      "feat3          0.4271      0.074      5.787      0.000       0.281       0.573\n",
      "==============================================================================\n",
      "Omnibus:                       11.283   Durbin-Watson:                   1.641\n",
      "Prob(Omnibus):                  0.004   Jarque-Bera (JB):               13.336\n",
      "Skew:                           0.578   Prob(JB):                      0.00127\n",
      "Kurtosis:                       4.192   Cond. No.                         130.\n",
      "==============================================================================\n",
      "\n",
      "Notes:\n",
      "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n"
     ]
    }
   ],
   "source": [
    "# step 1: build a model\n",
    "lm_best = smf.ols(formula =  \"\"\"log_sales3 ~ log_price1 +\n",
    "                                        log_price2 +\n",
    "                                        log_price3 +\n",
    "                                        log_price4 +\n",
    "                                        log_price5 +\n",
    "                                        disp3 +\n",
    "                                        feat3\"\"\",\n",
    "                                        data = df)\n",
    "\n",
    "\n",
    "# step 2: fit the model based on the data\n",
    "results_3 = lm_best.fit()\n",
    "\n",
    "# step 3: analyze the summary output\n",
    "print(results_3.summary())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:48.017610Z",
     "start_time": "2021-03-27T20:01:47.992793Z"
    }
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "                            OLS Regression Results                            \n",
      "==============================================================================\n",
      "Dep. Variable:             log_sales3   R-squared:                       0.712\n",
      "Model:                            OLS   Adj. R-squared:                  0.694\n",
      "Method:                 Least Squares   F-statistic:                     38.20\n",
      "Date:                Sat, 27 Mar 2021   Prob (F-statistic):           1.85e-26\n",
      "Time:                        16:01:48   Log-Likelihood:                -30.148\n",
      "No. Observations:                 116   AIC:                             76.30\n",
      "Df Residuals:                     108   BIC:                             98.32\n",
      "Df Model:                           7                                         \n",
      "Covariance Type:            nonrobust                                         \n",
      "==============================================================================\n",
      "                 coef    std err          t      P>|t|      [0.025      0.975]\n",
      "------------------------------------------------------------------------------\n",
      "Intercept      2.3313      1.077      2.164      0.033       0.196       4.467\n",
      "log_price1     1.1542      0.364      3.168      0.002       0.432       1.876\n",
      "log_price2     1.0704      0.662      1.618      0.109      -0.241       2.382\n",
      "log_price3    -4.4184      0.474     -9.324      0.000      -5.358      -3.479\n",
      "log_price4     1.4386      0.457      3.151      0.002       0.534       2.344\n",
      "log_price5     0.0745      0.333      0.224      0.824      -0.586       0.735\n",
      "disp3          0.0879      0.074      1.186      0.238      -0.059       0.235\n",
      "feat3          0.4271      0.074      5.787      0.000       0.281       0.573\n",
      "==============================================================================\n",
      "Omnibus:                       11.283   Durbin-Watson:                   1.641\n",
      "Prob(Omnibus):                  0.004   Jarque-Bera (JB):               13.336\n",
      "Skew:                           0.578   Prob(JB):                      0.00127\n",
      "Kurtosis:                       4.192   Cond. No.                         130.\n",
      "==============================================================================\n",
      "\n",
      "Notes:\n",
      "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n"
     ]
    }
   ],
   "source": [
    "# Re-running the the regression without variables with p-values above 0.05\n",
    "\n",
    "# step 1: build a model\n",
    "lm_best = smf.ols(formula =  \"\"\"log_sales3 ~ log_price1 +\n",
    "                                        log_price3 +\n",
    "                                        log_price4 +\n",
    "                                        disp3 +\n",
    "                                        feat3\"\"\",\n",
    "                                        data = df)\n",
    "\n",
    "\n",
    "# step 2: fit the model based on the data\n",
    "results_3_opt = lm_best.fit()\n",
    "\n",
    "# step 3: analyze the summary output\n",
    "print(results_3.summary())"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Product 4: Minute Maid 64 oz"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:48.047656Z",
     "start_time": "2021-03-27T20:01:48.019582Z"
    },
    "scrolled": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "                            OLS Regression Results                            \n",
      "==============================================================================\n",
      "Dep. Variable:             log_sales4   R-squared:                       0.752\n",
      "Model:                            OLS   Adj. R-squared:                  0.736\n",
      "Method:                 Least Squares   F-statistic:                     46.70\n",
      "Date:                Sat, 27 Mar 2021   Prob (F-statistic):           7.43e-30\n",
      "Time:                        16:01:48   Log-Likelihood:                 22.112\n",
      "No. Observations:                 116   AIC:                            -28.22\n",
      "Df Residuals:                     108   BIC:                            -6.194\n",
      "Df Model:                           7                                         \n",
      "Covariance Type:            nonrobust                                         \n",
      "==============================================================================\n",
      "                 coef    std err          t      P>|t|      [0.025      0.975]\n",
      "------------------------------------------------------------------------------\n",
      "Intercept      2.7515      0.709      3.879      0.000       1.346       4.157\n",
      "log_price1     0.5407      0.243      2.228      0.028       0.060       1.022\n",
      "log_price2     0.2397      0.423      0.567      0.572      -0.598       1.078\n",
      "log_price3     0.6079      0.261      2.328      0.022       0.090       1.125\n",
      "log_price4    -2.7045      0.390     -6.935      0.000      -3.478      -1.931\n",
      "log_price5     0.5532      0.212      2.613      0.010       0.134       0.973\n",
      "disp4          0.0829      0.057      1.442      0.152      -0.031       0.197\n",
      "feat4          0.3769      0.057      6.646      0.000       0.265       0.489\n",
      "==============================================================================\n",
      "Omnibus:                       31.249   Durbin-Watson:                   1.827\n",
      "Prob(Omnibus):                  0.000   Jarque-Bera (JB):               68.303\n",
      "Skew:                           1.064   Prob(JB):                     1.47e-15\n",
      "Kurtosis:                       6.099   Cond. No.                         134.\n",
      "==============================================================================\n",
      "\n",
      "Notes:\n",
      "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n"
     ]
    }
   ],
   "source": [
    "# step 1: build a model\n",
    "lm_best = smf.ols(formula =  \"\"\"log_sales4 ~ log_price1 +\n",
    "                                        log_price2 +\n",
    "                                        log_price3 +\n",
    "                                        log_price4 +\n",
    "                                        log_price5 +\n",
    "                                        disp4 +\n",
    "                                        feat4\"\"\",\n",
    "                                        data = df)\n",
    "\n",
    "\n",
    "# step 2: fit the model based on the data\n",
    "results_4 = lm_best.fit()\n",
    "\n",
    "# step 3: analyze the summary output\n",
    "print(results_4.summary())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:48.073918Z",
     "start_time": "2021-03-27T20:01:48.049460Z"
    },
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "                            OLS Regression Results                            \n",
      "==============================================================================\n",
      "Dep. Variable:             log_sales4   R-squared:                       0.752\n",
      "Model:                            OLS   Adj. R-squared:                  0.736\n",
      "Method:                 Least Squares   F-statistic:                     46.70\n",
      "Date:                Sat, 27 Mar 2021   Prob (F-statistic):           7.43e-30\n",
      "Time:                        16:01:48   Log-Likelihood:                 22.112\n",
      "No. Observations:                 116   AIC:                            -28.22\n",
      "Df Residuals:                     108   BIC:                            -6.194\n",
      "Df Model:                           7                                         \n",
      "Covariance Type:            nonrobust                                         \n",
      "==============================================================================\n",
      "                 coef    std err          t      P>|t|      [0.025      0.975]\n",
      "------------------------------------------------------------------------------\n",
      "Intercept      2.7515      0.709      3.879      0.000       1.346       4.157\n",
      "log_price1     0.5407      0.243      2.228      0.028       0.060       1.022\n",
      "log_price2     0.2397      0.423      0.567      0.572      -0.598       1.078\n",
      "log_price3     0.6079      0.261      2.328      0.022       0.090       1.125\n",
      "log_price4    -2.7045      0.390     -6.935      0.000      -3.478      -1.931\n",
      "log_price5     0.5532      0.212      2.613      0.010       0.134       0.973\n",
      "disp4          0.0829      0.057      1.442      0.152      -0.031       0.197\n",
      "feat4          0.3769      0.057      6.646      0.000       0.265       0.489\n",
      "==============================================================================\n",
      "Omnibus:                       31.249   Durbin-Watson:                   1.827\n",
      "Prob(Omnibus):                  0.000   Jarque-Bera (JB):               68.303\n",
      "Skew:                           1.064   Prob(JB):                     1.47e-15\n",
      "Kurtosis:                       6.099   Cond. No.                         134.\n",
      "==============================================================================\n",
      "\n",
      "Notes:\n",
      "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n"
     ]
    }
   ],
   "source": [
    "# Re-running the the regression without variables with p-values above 0.05\n",
    "\n",
    "# step 1: build a model\n",
    "lm_best = smf.ols(formula =  \"\"\"log_sales4 ~ log_price1 +\n",
    "                                        log_price3 +\n",
    "                                        log_price4 +\n",
    "                                        log_price5 +\n",
    "                                        disp4 +\n",
    "                                        feat4\"\"\",\n",
    "                                        data = df)\n",
    "\n",
    "\n",
    "# step 2: fit the model based on the data\n",
    "results_4_opt = lm_best.fit()\n",
    "\n",
    "# step 3: analyze the summary output\n",
    "print(results_4.summary())"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Product 5: Dominick's 64 oz"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:48.105841Z",
     "start_time": "2021-03-27T20:01:48.076437Z"
    },
    "scrolled": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "                            OLS Regression Results                            \n",
      "==============================================================================\n",
      "Dep. Variable:             log_sales5   R-squared:                       0.667\n",
      "Model:                            OLS   Adj. R-squared:                  0.646\n",
      "Method:                 Least Squares   F-statistic:                     30.94\n",
      "Date:                Sat, 27 Mar 2021   Prob (F-statistic):           4.05e-23\n",
      "Time:                        16:01:48   Log-Likelihood:                -21.400\n",
      "No. Observations:                 116   AIC:                             58.80\n",
      "Df Residuals:                     108   BIC:                             80.83\n",
      "Df Model:                           7                                         \n",
      "Covariance Type:            nonrobust                                         \n",
      "==============================================================================\n",
      "                 coef    std err          t      P>|t|      [0.025      0.975]\n",
      "------------------------------------------------------------------------------\n",
      "Intercept     -0.2585      0.941     -0.275      0.784      -2.123       1.606\n",
      "log_price1     0.0985      0.336      0.293      0.770      -0.567       0.764\n",
      "log_price2    -1.6637      0.611     -2.722      0.008      -2.875      -0.452\n",
      "log_price3     1.0508      0.365      2.876      0.005       0.327       1.775\n",
      "log_price4     1.1025      0.397      2.778      0.006       0.316       1.889\n",
      "log_price5    -3.2416      0.352     -9.219      0.000      -3.939      -2.545\n",
      "disp5          0.1224      0.063      1.958      0.053      -0.002       0.246\n",
      "feat5          0.2862      0.067      4.256      0.000       0.153       0.420\n",
      "==============================================================================\n",
      "Omnibus:                        4.625   Durbin-Watson:                   1.679\n",
      "Prob(Omnibus):                  0.099   Jarque-Bera (JB):                4.684\n",
      "Skew:                          -0.270   Prob(JB):                       0.0962\n",
      "Kurtosis:                       3.823   Cond. No.                         123.\n",
      "==============================================================================\n",
      "\n",
      "Notes:\n",
      "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n"
     ]
    }
   ],
   "source": [
    "# step 1: build a model\n",
    "lm_best = smf.ols(formula =  \"\"\"log_sales5 ~ log_price1 +\n",
    "                                        log_price2 +\n",
    "                                        log_price3 +\n",
    "                                        log_price4 +\n",
    "                                        log_price5 +\n",
    "                                        disp5 +\n",
    "                                        feat5\"\"\",\n",
    "                                        data = df)\n",
    "\n",
    "\n",
    "# step 2: fit the model based on the data\n",
    "results_5 = lm_best.fit()\n",
    "\n",
    "# step 3: analyze the summary output\n",
    "print(results_5.summary())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:48.131089Z",
     "start_time": "2021-03-27T20:01:48.107605Z"
    }
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "                            OLS Regression Results                            \n",
      "==============================================================================\n",
      "Dep. Variable:             log_sales5   R-squared:                       0.667\n",
      "Model:                            OLS   Adj. R-squared:                  0.649\n",
      "Method:                 Least Squares   F-statistic:                     36.39\n",
      "Date:                Sat, 27 Mar 2021   Prob (F-statistic):           6.66e-24\n",
      "Time:                        16:01:48   Log-Likelihood:                -21.446\n",
      "No. Observations:                 116   AIC:                             56.89\n",
      "Df Residuals:                     109   BIC:                             76.17\n",
      "Df Model:                           6                                         \n",
      "Covariance Type:            nonrobust                                         \n",
      "==============================================================================\n",
      "                 coef    std err          t      P>|t|      [0.025      0.975]\n",
      "------------------------------------------------------------------------------\n",
      "Intercept     -0.2921      0.930     -0.314      0.754      -2.135       1.551\n",
      "log_price2    -1.6261      0.595     -2.733      0.007      -2.806      -0.447\n",
      "log_price3     1.0544      0.364      2.900      0.005       0.334       1.775\n",
      "log_price4     1.1239      0.389      2.893      0.005       0.354       1.894\n",
      "log_price5    -3.2319      0.349     -9.272      0.000      -3.923      -2.541\n",
      "disp5          0.1240      0.062      1.999      0.048       0.001       0.247\n",
      "feat5          0.2871      0.067      4.291      0.000       0.154       0.420\n",
      "==============================================================================\n",
      "Omnibus:                        4.516   Durbin-Watson:                   1.680\n",
      "Prob(Omnibus):                  0.105   Jarque-Bera (JB):                4.471\n",
      "Skew:                          -0.274   Prob(JB):                        0.107\n",
      "Kurtosis:                       3.790   Cond. No.                         113.\n",
      "==============================================================================\n",
      "\n",
      "Notes:\n",
      "[1] Standard Errors assume that the covariance matrix of the errors is correctly specified.\n"
     ]
    }
   ],
   "source": [
    "# Re-running the the regression without variables with p-values above 0.05\n",
    "\n",
    "# step 1: build a model\n",
    "lm_best_opt = smf.ols(formula =  \"\"\"log_sales5 ~ log_price2 +\n",
    "                                        log_price3 +\n",
    "                                        log_price4 +\n",
    "                                        log_price5 +\n",
    "                                        disp5 +\n",
    "                                        feat5\"\"\",\n",
    "                                        data = df)\n",
    "\n",
    "\n",
    "# step 2: fit the model based on the data\n",
    "results_5_opt = lm_best_opt.fit()\n",
    "\n",
    "# step 3: analyze the summary output\n",
    "print(results_5_opt.summary())"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<br><br>\n",
    "\n",
    "# Part 2: Monte Carlo\n",
    "\n",
    "## Constant Variables"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:48.158496Z",
     "start_time": "2021-03-27T20:01:48.132830Z"
    }
   },
   "outputs": [],
   "source": [
    "# Setup constant variables\n",
    "\n",
    "# Ounces per SKU\n",
    "oz_1 = 64\n",
    "oz_2 = 96\n",
    "oz_3 = 64\n",
    "oz_4 = 64\n",
    "oz_5 = 64\n",
    "\n",
    "# set up \"known\" parameters based historical averages (without log transformation):\n",
    "grmar1_avg = df['grmar1'].mean()\n",
    "grmar2_avg = df['grmar2'].mean()\n",
    "grmar3_avg = df['grmar3'].mean()\n",
    "grmar4_avg = df['grmar4'].mean()\n",
    "grmar5_avg = df['grmar5'].mean()\n",
    "\n",
    "# set up \"known\" parameters based on log of historical averages:\n",
    "price1_avg_log = np.log10(df['price1'].mean())\n",
    "price2_avg_log = np.log10(df['price2'].mean())\n",
    "price3_avg_log = np.log10(df['price3'].mean())\n",
    "price4_avg_log = np.log10(df['price4'].mean())\n",
    "price5_avg_log = np.log10(df['price5'].mean())\n",
    "\n",
    "\n",
    "\n",
    "##############################################################################\n",
    "# set up random draw parameters for coefficients - SKU1\n",
    "\n",
    "# intercept \n",
    "intercept_mu_1    = results_1_opt.params[0]  # coefficient from regression\n",
    "intercept_sigma_1 = results_1_opt.bse[0]     # standard error from regression\n",
    "\n",
    "# price SKU1\n",
    "B1_mu_P1_1    = results_1_opt.params[1]      # coefficient from regression\n",
    "B1_sigma_P1_1 = results_1_opt.bse[1]         # standard error from regression\n",
    "\n",
    "# price SKU3\n",
    "B2_mu_P3_1    = results_1_opt.params[2]      # coefficient from regression\n",
    "B2_sigma_P3_1 = results_1_opt.bse[2]         # standard error from regression\n",
    "\n",
    "# disp1 SKU1\n",
    "B3_mu_D1_1 = results_1_opt.params[3]         # coefficient from regression\n",
    "\n",
    "# feat1 SKU1\n",
    "B4_mu_F1_1 = results_1_opt.params[4]         # coefficient from regression\n",
    "\n",
    "\n",
    "##############################################################################\n",
    "# set up random draw parameters for coefficients - SKU2\n",
    "\n",
    "# intercept \n",
    "intercept_mu_2    = results_2_opt.params[0] # coefficient from regression\n",
    "intercept_sigma_2 = results_2_opt.bse[0]    # standard error from regression\n",
    "\n",
    "# price SKU1\n",
    "B1_mu_P1_2    = results_2_opt.params[1]     # coefficient from regression\n",
    "B1_sigma_P1_2 = results_2_opt.bse[1]        # standard error from regression\n",
    "\n",
    "# price SKU2\n",
    "B2_mu_P2_2    = results_2_opt.params[2]     # coefficient from regression\n",
    "B2_sigma_P2_2 = results_2_opt.bse[2]        # standard error from regression\n",
    "\n",
    "# disp2 SKU2\n",
    "B3_mu_D2_2 = results_2_opt.params[3]        # coefficient from regression\n",
    "\n",
    "# feat2 SKU2\n",
    "B4_mu_F2_2 = results_2_opt.params[4]        # coefficient from regression\n",
    "\n",
    "\n",
    "##############################################################################\n",
    "# set up random draw parameters for coefficients - SKU3\n",
    "\n",
    "# intercept \n",
    "intercept_mu_3    = results_3_opt.params[0]  # coefficient from regression\n",
    "intercept_sigma_3 = results_3_opt.bse[0]     # standard error from regression\n",
    "\n",
    "# price SKU1\n",
    "B1_mu_P1_3    = results_3_opt.params[1]      # coefficient from regression\n",
    "B1_sigma_P1_3 = results_3_opt.bse[1]         # standard error from regression\n",
    "\n",
    "# price SKU3 \n",
    "B2_mu_P3_3    = results_3_opt.params[2]      # coefficient from regression\n",
    "B2_sigma_P3_3 = results_3_opt.bse[2]         # standard error from regression\n",
    "\n",
    "# feat2 SKU4\n",
    "B3_mu_P4_3    = results_3_opt.params[3]      # coefficient from regression\n",
    "B3_sigma_P4_3 = results_3_opt.bse[3]         # standard error from regression\n",
    "\n",
    "# disp3 SKU3\n",
    "B4_mu_D3_3 = results_3_opt.params[4]         # coefficient from regression\n",
    "\n",
    "# feat3 SKU3\n",
    "B5_mu_F3_3 = results_3_opt.params[5]         # coefficient from regression\n",
    "\n",
    "\n",
    "##############################################################################\n",
    "# set up random draw parameters for coefficients - SKU4\n",
    "\n",
    "# intercept \n",
    "intercept_mu_4    = results_4_opt.params[0]  # coefficient from regression\n",
    "intercept_sigma_4 = results_4_opt.bse[0]     # standard error from regression\n",
    "\n",
    "# price SKU1\n",
    "B1_mu_P1_4    = results_4_opt.params[1]      # coefficient from regression\n",
    "B1_sigma_P1_4 = results_4_opt.bse[1]         # standard error from regression\n",
    "\n",
    "# price SKU3\n",
    "B2_mu_P3_4    = results_4_opt.params[2]      # coefficient from regression\n",
    "B2_sigma_P3_4 = results_4_opt.bse[2]         # standard error from regression\n",
    "\n",
    "# price  SKU4\n",
    "B3_mu_P4_4    = results_4_opt.params[3]      # coefficient from regression\n",
    "B3_sigma_P4_4 = results_4_opt.bse[3]         # standard error from regression\n",
    "\n",
    "# price SKU5\n",
    "B4_mu_P5_4    = results_4_opt.params[4]      # coefficient from regression\n",
    "B4_sigma_P5_4 = results_4_opt.bse[4]         # standard error from regression\n",
    "\n",
    "# disp4 SKU4\n",
    "B5_mu_D4_4 = results_4_opt.params[5]         # coefficient from regression\n",
    "\n",
    "# feat4 SKU4\n",
    "B6_mu_F4_4 = results_4_opt.params[6]         # coefficient from regression\n",
    "\n",
    "\n",
    "##############################################################################\n",
    "# set up random draw parameters for coefficients - SKU5 \n",
    "\n",
    "# intercept \n",
    "intercept_mu_5    = results_5_opt.params[0]  # coefficient from regression\n",
    "intercept_sigma_5 = results_5_opt.bse[0]     # standard error from regression\n",
    "\n",
    "# price SKU2\n",
    "B1_mu_P2_5    = results_5_opt.params[1]      # coefficient from regression\n",
    "B1_sigma_P2_5 = results_5_opt.bse[1]         # standard error from regression\n",
    "\n",
    "# price SKU3\n",
    "B2_mu_P3_5    = results_5_opt.params[2]      # coefficient from regression\n",
    "B2_sigma_P3_5 = results_5_opt.bse[2]         # standard error from regression\n",
    "\n",
    "# price SKU4\n",
    "B3_mu_P4_5    = results_5_opt.params[3]      # coefficient from regression\n",
    "B3_sigma_P4_5 = results_5.bse[3]             # standard error from regression\n",
    "\n",
    "# price SKU5\n",
    "B4_mu_P5_5    = results_5_opt.params[4]      # coefficient from regression\n",
    "B4_sigma_P5_5 = results_5_opt.bse[4]         # standard error from regression\n",
    "\n",
    "# disp SKU5\n",
    "B5_mu_D5_5    = results_5_opt.params[5]      # coefficient from regression\n",
    "\n",
    "# feat5 SKU5\n",
    "B6_mu_F5_5    = results_5_opt.params[6]      # coefficient from regression"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<br>\n",
    "\n",
    "## Simulation (Iterating over Price_5)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:51.450466Z",
     "start_time": "2021-03-27T20:01:48.160455Z"
    },
    "code_folding": [],
    "scrolled": false
   },
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "# Simulation\n",
    "\n",
    "# set up Simulation parameters\n",
    "np.random.seed(42)  # fix the random seed for reproducibility \n",
    "\n",
    "number_sims = 1_000\n",
    "\n",
    "# Min Max Prices for SKU5\n",
    "min_price5 = df['price5'].min()\n",
    "max_price5 = df['price5'].max()\n",
    "\n",
    "\n",
    "# Store results from each simulation here\n",
    "final_stats = []\n",
    "\n",
    "for P_5 in arange(min_price5, max_price5,0.001):\n",
    "    \n",
    "    all_stats = []\n",
    "\n",
    "    # Begin Simulation Loop\n",
    "    for i in range(number_sims):\n",
    "        \n",
    "        ###########\n",
    "        #  SKU1   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_1 = np.random.normal(intercept_mu_1, intercept_sigma_1)\n",
    "        B1_1   = np.random.normal(B1_mu_P1_1, B1_sigma_P1_1)\n",
    "        B2_1   = np.random.normal(B2_mu_P3_1, B2_sigma_P3_1)   \n",
    "        feat1  = np.random.randint(2)\n",
    "        disp1  = np.random.randint(2)\n",
    "        \n",
    "        sales_1 = np.exp(intercept_1 \\\n",
    "                + B1_1 * price1_avg_log \\\n",
    "                + B2_1 * price3_avg_log \\\n",
    "                + B3_mu_D1_1 * disp1 \\\n",
    "                + B4_mu_F1_1 * feat1)\n",
    "        revenue_1 = sales_1 * oz_1 * np.exp(price1_avg_log)\n",
    "        profits_1 = revenue_1 * grmar1_avg\n",
    "        \n",
    "        \n",
    "        ###########\n",
    "        #  SKU2   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_2 = np.random.normal(intercept_mu_2, intercept_sigma_2)\n",
    "        B1_2   = np.random.normal(B1_mu_P1_2, B1_sigma_P1_2)\n",
    "        B2_2   = np.random.normal(B2_mu_P2_2, B2_sigma_P2_2)   \n",
    "        feat2  = np.random.randint(2)\n",
    "        disp2  = np.random.randint(2)\n",
    "        \n",
    "        sales_2 = np.exp(intercept_2 \\\n",
    "                + B1_2 * price1_avg_log \\\n",
    "                + B2_2 * price2_avg_log \\\n",
    "                + B3_mu_D2_2 * disp2 \\\n",
    "                + B4_mu_F2_2 * feat2)\n",
    "        \n",
    "        revenue_2 = sales_2 * oz_2 * np.exp(price2_avg_log)\n",
    "        profits_2 = revenue_2 * grmar2_avg\n",
    "        \n",
    "                \n",
    "        ###########\n",
    "        #  SKU3   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_3 = np.random.normal(intercept_mu_3, intercept_sigma_3)\n",
    "        B1_3   = np.random.normal(B1_mu_P1_3, B1_sigma_P1_3)\n",
    "        B2_3   = np.random.normal(B2_mu_P3_3, B2_sigma_P3_3)   \n",
    "        B3_3   = np.random.normal(B3_mu_P4_3, B3_sigma_P4_3) \n",
    "        feat3  = np.random.randint(2)\n",
    "        disp3  = np.random.randint(2)\n",
    "        \n",
    "        sales_3 = np.exp(intercept_3 \\\n",
    "                + B1_3 * price1_avg_log \\\n",
    "                + B2_3 * price3_avg_log \\\n",
    "                + B3_3 * price4_avg_log \\\n",
    "                + B4_mu_D3_3 * disp3 \\\n",
    "                + B5_mu_F3_3 * feat3)\n",
    "        \n",
    "        revenue_3 = sales_3 * oz_3 * np.exp(price3_avg_log)\n",
    "        profits_3 = revenue_3 * grmar3_avg\n",
    "        \n",
    "        \n",
    "        ###########\n",
    "        #  SKU4   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_4 = np.random.normal(intercept_mu_4, intercept_sigma_4)\n",
    "        B1_4   = np.random.normal(B1_mu_P1_4, B1_sigma_P1_4)\n",
    "        B2_4   = np.random.normal(B2_mu_P3_4, B2_sigma_P3_4)   \n",
    "        B3_4   = np.random.normal(B3_mu_P4_4, B3_sigma_P4_5) \n",
    "        B4_4   = np.random.normal(B4_mu_P5_5, B4_sigma_P5_5)\n",
    "        feat4  = np.random.randint(2)\n",
    "        disp4  = np.random.randint(2)\n",
    "        \n",
    "        sales_4 = np.exp(intercept_4 \\\n",
    "                + B1_4 * price1_avg_log \\\n",
    "                + B2_4 * price3_avg_log \\\n",
    "                + B3_4 * price4_avg_log \\\n",
    "                + B4_4 * (np.log10(P_5)) \\\n",
    "                + B5_mu_D4_4 * disp4 \\\n",
    "                + B6_mu_F4_4 * feat4)\n",
    "        \n",
    "        revenue_4 = sales_4 * oz_4 * np.exp(price4_avg_log)\n",
    "        profits_4 = revenue_4 * grmar4_avg\n",
    "        \n",
    "        \n",
    "        ###########\n",
    "        #  SKU5   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_5 = np.random.normal(intercept_mu_5, intercept_sigma_5)\n",
    "        B1_5   = np.random.normal(B1_mu_P2_5, B1_sigma_P2_5)\n",
    "        B2_5   = np.random.normal(B2_mu_P3_5, B2_sigma_P3_5)   \n",
    "        B3_5   = np.random.normal(B3_mu_P4_5, B3_sigma_P4_5) \n",
    "        B4_5   = np.random.normal(B4_mu_P5_5, B4_sigma_P5_5) \n",
    "        feat5  = np.random.randint(2)\n",
    "        disp5  = np.random.randint(2)\n",
    "        \n",
    "        sales_5 = np.exp(intercept_5 \\\n",
    "                + B1_5 * price2_avg_log \\\n",
    "                + B2_5 * price3_avg_log \\\n",
    "                + B3_5 * price4_avg_log \\\n",
    "                + B4_5 * (np.log10(P_5)) \\\n",
    "                + B5_mu_D5_5 * disp5 \\\n",
    "                + B6_mu_F5_5 * feat5)\n",
    "        \n",
    "        revenue_5 = sales_5 * oz_5 * P_5\n",
    "        profits_5 = revenue_5 * grmar5_avg\n",
    "        \n",
    "        \n",
    "        ####################\n",
    "        #  Appending SKUs  # \n",
    "        ####################\n",
    "        \n",
    "        \n",
    "        all_stats.append([sales_5, revenue_5, profits_5, disp5, feat5, \n",
    "                          sales_4, revenue_4, profits_4, disp4, feat4, \n",
    "                          sales_3, revenue_3, profits_3, disp3, feat3,\n",
    "                          sales_2, revenue_2, profits_2, disp2, feat2,\n",
    "                          sales_1, revenue_1, profits_1, disp1, feat1,])\n",
    "        \n",
    "           \n",
    "    results_df = pd.DataFrame.from_records(all_stats, columns =\n",
    "    ['units_sold_5','revenue_5','profits_5','disp_5','feat_5',\n",
    "     'units_sold_4','revenue_4','profits_4','disp_4','feat_4',\n",
    "     'units_sold_3','revenue_3','profits_3','disp_3','feat_3',\n",
    "     'units_sold_2','revenue_2','profits_2','disp_2','feat_2',\n",
    "     'units_sold_1','revenue_1','profits_1','disp_1','feat_1'])\n",
    "        \n",
    "    final_stats.append([P_5,\n",
    "                        results_df['profits_5'].mean(),\n",
    "                        results_df['profits_4'].mean(),\n",
    "                        results_df['profits_3'].mean(),\n",
    "                        results_df['profits_2'].mean(),\n",
    "                        results_df['profits_1'].mean(),\n",
    "                        results_df['feat_5'].value_counts().idxmax(), # most frequent value\n",
    "                        results_df['feat_4'].value_counts().idxmax(),\n",
    "                        results_df['feat_3'].value_counts().idxmax(),\n",
    "                        results_df['feat_2'].value_counts().idxmax(),\n",
    "                        results_df['feat_1'].value_counts().idxmax(),\n",
    "                        results_df['disp_5'].value_counts().idxmax(),\n",
    "                        results_df['disp_4'].value_counts().idxmax(),\n",
    "                        results_df['disp_3'].value_counts().idxmax(),\n",
    "                        results_df['disp_2'].value_counts().idxmax(),\n",
    "                        results_df['disp_1'].value_counts().idxmax()])\n",
    "    \n",
    "final_stats_df = pd.DataFrame.from_records(final_stats, columns =\n",
    "                ['Price per Oz_5', 'Profits_5', 'Profits_4', \n",
    "                 'Profits_3', 'Profits_2', 'Profits_1',\n",
    "                 'Feat_5', 'Feat_4', 'Feat_3', 'Feat_2', 'Feat_1',\n",
    "                 'Disp_5', 'Disp_4', 'Disp_3', 'Disp_2', 'Disp_1',])\n",
    "\n",
    "final_stats_df['Total Profits'] = final_stats_df['Profits_5']\\\n",
    "                                + final_stats_df['Profits_4']\\\n",
    "                                + final_stats_df['Profits_3']\\\n",
    "                                + final_stats_df['Profits_2']\\\n",
    "                                + final_stats_df['Profits_1']\n",
    "\n",
    "\n",
    "# Plot scatterplot\n",
    "final_stats_df.plot.scatter(x = \"Price per Oz_5\", y = \"Profits_5\");\n",
    "final_stats_df.plot.scatter(x = \"Price per Oz_5\", y = \"Total Profits\");"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:51.464895Z",
     "start_time": "2021-03-27T20:01:51.451813Z"
    },
    "scrolled": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Price per Oz_5</th>\n",
       "      <th>Profits_5</th>\n",
       "      <th>Profits_4</th>\n",
       "      <th>Profits_3</th>\n",
       "      <th>Profits_2</th>\n",
       "      <th>Profits_1</th>\n",
       "      <th>Feat_5</th>\n",
       "      <th>Feat_4</th>\n",
       "      <th>Feat_3</th>\n",
       "      <th>Feat_2</th>\n",
       "      <th>Feat_1</th>\n",
       "      <th>Disp_5</th>\n",
       "      <th>Disp_4</th>\n",
       "      <th>Disp_3</th>\n",
       "      <th>Disp_2</th>\n",
       "      <th>Disp_1</th>\n",
       "      <th>Total Profits</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>0.020469</td>\n",
       "      <td>104.884505</td>\n",
       "      <td>247539.447647</td>\n",
       "      <td>479.783512</td>\n",
       "      <td>488.924742</td>\n",
       "      <td>366.204341</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>248979.244746</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   Price per Oz_5   Profits_5      Profits_4   Profits_3   Profits_2  \\\n",
       "5        0.020469  104.884505  247539.447647  479.783512  488.924742   \n",
       "\n",
       "    Profits_1  Feat_5  Feat_4  Feat_3  Feat_2  Feat_1  Disp_5  Disp_4  Disp_3  \\\n",
       "5  366.204341       1       1       0       0       1       1       1       0   \n",
       "\n",
       "   Disp_2  Disp_1  Total Profits  \n",
       "5       0       0  248979.244746  "
      ]
     },
     "execution_count": 16,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Identify Best Pricing & Marketing Settings for Maximum Profit for SKU5\n",
    "index5 = final_stats_df.loc[final_stats_df['Profits_5'] == final_stats_df['Profits_5'].max(),:].index\n",
    "final_stats_df.iloc[index5,:]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "<br>\n",
    "\n",
    "## Simulation (Iterating over Price_4)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:01:54.790041Z",
     "start_time": "2021-03-27T20:01:51.466285Z"
    }
   },
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {
      "needs_background": "light"
     },
     "output_type": "display_data"
    }
   ],
   "source": [
    "# Simulation\n",
    "\n",
    "# set up Simulation parameters\n",
    "np.random.seed(42)  # fix the random seed for reproducibility \n",
    "\n",
    "number_sims = 1_000\n",
    "\n",
    "# Min Max Prices for SKU4\n",
    "min_price4 = df['price4'].min()\n",
    "max_price4 = df['price4'].max()\n",
    "\n",
    "# Store results from each simulation here\n",
    "final_stats = []\n",
    "\n",
    "for P_4 in arange(min_price4, max_price4,0.001):\n",
    "    \n",
    "    all_stats = []\n",
    "\n",
    "    # Begin Simulation Loop\n",
    "    for i in range(number_sims):\n",
    "        \n",
    "        ###########\n",
    "        #  SKU1   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_1 = np.random.normal(intercept_mu_1, intercept_sigma_1)\n",
    "        B1_1   = np.random.normal(B1_mu_P1_1, B1_sigma_P1_1)\n",
    "        B2_1   = np.random.normal(B2_mu_P3_1, B2_sigma_P3_1)   \n",
    "        feat1  = np.random.randint(2)\n",
    "        disp1  = np.random.randint(2)\n",
    "        \n",
    "        sales_1 = np.exp(intercept_1 \\\n",
    "                + B1_1 * price1_avg_log \\\n",
    "                + B2_1 * price3_avg_log \\\n",
    "                + B3_mu_D1_1 * disp1 \\\n",
    "                + B4_mu_F1_1 * feat1)\n",
    "        revenue_1 = sales_1 * oz_1 * np.exp(price1_avg_log)\n",
    "        profits_1 = revenue_1 * grmar1_avg\n",
    "        \n",
    "        \n",
    "        ###########\n",
    "        #  SKU2   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_2 = np.random.normal(intercept_mu_2, intercept_sigma_2)\n",
    "        B1_2   = np.random.normal(B1_mu_P1_2, B1_sigma_P1_2)\n",
    "        B2_2   = np.random.normal(B2_mu_P2_2, B2_sigma_P2_2)   \n",
    "        feat2  = np.random.randint(2)\n",
    "        disp2  = np.random.randint(2)\n",
    "        \n",
    "        sales_2 = np.exp(intercept_2 \\\n",
    "                + B1_2 * price1_avg_log \\\n",
    "                + B2_2 * price2_avg_log \\\n",
    "                + B3_mu_D2_2 * disp2 \\\n",
    "                + B4_mu_F2_2 * feat2)\n",
    "        \n",
    "        revenue_2 = sales_2 * oz_2 * np.exp(price2_avg_log)\n",
    "        profits_2 = revenue_2 * grmar2_avg\n",
    "        \n",
    "                \n",
    "        ###########\n",
    "        #  SKU3   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_3 = np.random.normal(intercept_mu_3, intercept_sigma_3)\n",
    "        B1_3   = np.random.normal(B1_mu_P1_3, B1_sigma_P1_3)\n",
    "        B2_3   = np.random.normal(B2_mu_P3_3, B2_sigma_P3_3)   \n",
    "        B3_3   = np.random.normal(B3_mu_P4_3, B3_sigma_P4_3) \n",
    "        feat3  = np.random.randint(2)\n",
    "        disp3  = np.random.randint(2)\n",
    "        \n",
    "        sales_3 = np.exp(intercept_3 \\\n",
    "                + B1_3 * price1_avg_log \\\n",
    "                + B2_3 * price3_avg_log \\\n",
    "                + B3_3 * (np.log10(P_4)) \\\n",
    "                + B4_mu_D3_3 * disp3 \\\n",
    "                + B5_mu_F3_3 * feat3)\n",
    "        \n",
    "        revenue_3 = sales_3 * oz_3 * np.exp(price3_avg_log)\n",
    "        profits_3 = revenue_3 * grmar3_avg\n",
    "        \n",
    "        \n",
    "        ###########\n",
    "        #  SKU4   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_4 = np.random.normal(intercept_mu_4, intercept_sigma_4)\n",
    "        B1_4   = np.random.normal(B1_mu_P1_4, B1_sigma_P1_4)\n",
    "        B2_4   = np.random.normal(B2_mu_P3_4, B2_sigma_P3_4)   \n",
    "        B3_4   = np.random.normal(B3_mu_P4_4, B3_sigma_P4_5) \n",
    "        B4_4   = np.random.normal(B4_mu_P5_5, B4_sigma_P5_5)\n",
    "        feat4  = np.random.randint(2)\n",
    "        disp4  = np.random.randint(2)\n",
    "        \n",
    "        sales_4 = np.exp(intercept_4 \\\n",
    "                + B1_4 * price1_avg_log \\\n",
    "                + B2_4 * price3_avg_log \\\n",
    "                + B3_4 * (np.log10(P_4)) \\\n",
    "                + B4_4 * price5_avg_log \\\n",
    "                + B5_mu_D4_4 * disp4 \\\n",
    "                + B6_mu_F4_4 * feat4)\n",
    "        \n",
    "        revenue_4 = sales_4 * oz_4 * P_4\n",
    "        profits_4 = revenue_4 * grmar4_avg\n",
    "        \n",
    "        \n",
    "        ###########\n",
    "        #  SKU5   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_5 = np.random.normal(intercept_mu_5, intercept_sigma_5)\n",
    "        B1_5   = np.random.normal(B1_mu_P2_5, B1_sigma_P2_5)\n",
    "        B2_5   = np.random.normal(B2_mu_P3_5, B2_sigma_P3_5)   \n",
    "        B3_5   = np.random.normal(B3_mu_P4_5, B3_sigma_P4_5) \n",
    "        B4_5   = np.random.normal(B4_mu_P5_5, B4_sigma_P5_5)\n",
    "        feat5  = np.random.randint(2)\n",
    "        disp5  = np.random.randint(2)\n",
    "        \n",
    "        sales_5 = np.exp(intercept_5 \\\n",
    "                + B1_5 * price2_avg_log \\\n",
    "                + B2_5 * price3_avg_log \\\n",
    "                + B3_5 * (np.log10(P_4)) \\\n",
    "                + B4_5 * price5_avg_log \\\n",
    "                + B5_mu_D5_5 * disp5 \\\n",
    "                + B6_mu_F5_5 * feat5)\n",
    "        \n",
    "        revenue_5 = sales_5 * oz_5 * np.exp(price5_avg_log)\n",
    "        profits_5 = revenue_5 * grmar5_avg\n",
    "        \n",
    "        \n",
    "        ####################\n",
    "        #  Appending SKUs  # \n",
    "        ####################\n",
    "        \n",
    "        \n",
    "        all_stats.append([sales_5, revenue_5, profits_5, disp5, feat5, \n",
    "                          sales_4, revenue_4, profits_4, disp4, feat4, \n",
    "                          sales_3, revenue_3, profits_3, disp3, feat3,\n",
    "                          sales_2, revenue_2, profits_2, disp2, feat2,\n",
    "                          sales_1, revenue_1, profits_1, disp1, feat1,])\n",
    "        \n",
    "           \n",
    "    results_df = pd.DataFrame.from_records(all_stats, columns =\n",
    "    ['units_sold_5','revenue_5','profits_5','disp_5','feat_5',\n",
    "     'units_sold_4','revenue_4','profits_4','disp_4','feat_4',\n",
    "     'units_sold_3','revenue_3','profits_3','disp_3','feat_3',\n",
    "     'units_sold_2','revenue_2','profits_2','disp_2','feat_2',\n",
    "     'units_sold_1','revenue_1','profits_1','disp_1','feat_1'])\n",
    "        \n",
    "    final_stats.append([P_4,\n",
    "                        results_df['profits_5'].mean(),\n",
    "                        results_df['profits_4'].mean(),\n",
    "                        results_df['profits_3'].mean(),\n",
    "                        results_df['profits_2'].mean(),\n",
    "                        results_df['profits_1'].mean(),\n",
    "                        results_df['feat_5'].value_counts().idxmax(), # most frequent value\n",
    "                        results_df['feat_4'].value_counts().idxmax(),\n",
    "                        results_df['feat_3'].value_counts().idxmax(),\n",
    "                        results_df['feat_2'].value_counts().idxmax(),\n",
    "                        results_df['feat_1'].value_counts().idxmax(),\n",
    "                        results_df['disp_5'].value_counts().idxmax(),\n",
    "                        results_df['disp_4'].value_counts().idxmax(),\n",
    "                        results_df['disp_3'].value_counts().idxmax(),\n",
    "                        results_df['disp_2'].value_counts().idxmax(),\n",
    "                        results_df['disp_1'].value_counts().idxmax()])\n",
    "    \n",
    "final_stats_df = pd.DataFrame.from_records(final_stats, columns =\n",
    "                ['Price per Oz_4', 'Profits_5', 'Profits_4', \n",
    "                 'Profits_3', 'Profits_2', 'Profits_1',\n",
    "                 'Feat_5', 'Feat_4', 'Feat_3', 'Feat_2', 'Feat_1',\n",
    "                 'Disp_5', 'Disp_4', 'Disp_3', 'Disp_2', 'Disp_1',])\n",
    "\n",
    "final_stats_df['Total Profits'] = final_stats_df['Profits_5']\\\n",
    "                                + final_stats_df['Profits_4']\\\n",
    "                                + final_stats_df['Profits_3']\\\n",
    "                                + final_stats_df['Profits_2']\\\n",
    "                                + final_stats_df['Profits_1']\n",
    "\n",
    "\n",
    "# Plot scatterplot\n",
    "final_stats_df.plot.scatter(x = \"Price per Oz_4\", y = \"Profits_4\");\n",
    "final_stats_df.plot.scatter(x = \"Price per Oz_4\", y = \"Total Profits\");"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Part 3: Simulation (Iterating over All Prices)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 66,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:35:15.449679Z",
     "start_time": "2021-03-27T20:35:15.025616Z"
    }
   },
   "outputs": [],
   "source": [
    "# Price Simulations\n",
    "\n",
    "# Min Max Prices for SKU#\n",
    "min_price1 = df['price1'].min()\n",
    "max_price1 = df['price1'].max()\n",
    "\n",
    "min_price2 = df['price2'].min()\n",
    "max_price2 = df['price2'].max()\n",
    "\n",
    "min_price3 = df['price3'].min()\n",
    "max_price3 = df['price3'].max()\n",
    "\n",
    "min_price4 = df['price4'].min()\n",
    "max_price4 = df['price4'].max()\n",
    "\n",
    "min_price5 = df['price5'].min()\n",
    "max_price5 = df['price5'].max()\n",
    "\n",
    "# Number of iterations\n",
    "n = 1000\n",
    "\n",
    "price_increment_1 = (max_price1 - min_price1)/n\n",
    "price_increment_2 = (max_price2 - min_price2)/n\n",
    "price_increment_3 = (max_price3 - min_price3)/n\n",
    "price_increment_4 = (max_price4 - min_price4)/n\n",
    "price_increment_5 = (max_price5 - min_price5)/n\n",
    "\n",
    "price_df = pd.DataFrame()\n",
    "\n",
    "price_df['P_1'] = arange(min_price1, max_price1, price_increment_1)\n",
    "price_df['P_2'] = arange(min_price2, max_price2, price_increment_2)\n",
    "price_df['P_3'] = arange(min_price3, max_price3, price_increment_3)\n",
    "price_df['P_4'] = arange(min_price4, max_price4, price_increment_4)\n",
    "price_df['P_5'] = arange(min_price5, max_price5, price_increment_5)\n",
    "\n",
    "price_df = shuffle(df = price_df)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "ExecuteTime": {
     "start_time": "2021-03-27T20:35:15.931Z"
    }
   },
   "outputs": [],
   "source": [
    "# Simulation\n",
    "\n",
    "# set up Simulation parameters\n",
    "np.random.seed(42)  # fix the random seed for reproducibility \n",
    "\n",
    "number_sims = 100_000\n",
    "\n",
    "# Store results from each simulation here\n",
    "final_stats = []\n",
    "\n",
    "# Loop over price dataframe\n",
    "for i in range(len(price_df)):\n",
    "    \n",
    "    # Extract price per SKU as log\n",
    "    P_1 = np.log10(price_df.iloc[i, 0])\n",
    "    P_2 = np.log10(price_df.iloc[i, 1])\n",
    "    P_3 = np.log10(price_df.iloc[i, 2])\n",
    "    P_4 = np.log10(price_df.iloc[i, 3])\n",
    "    P_5 = np.log10(price_df.iloc[i, 4])\n",
    "    \n",
    "    # Placeholder\n",
    "    all_stats = []\n",
    "\n",
    "    # Begin Simulation Loop\n",
    "    for i in range(number_sims):\n",
    "        \n",
    "        ###########\n",
    "        #  SKU1   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_1 = np.random.normal(intercept_mu_1, intercept_sigma_1)\n",
    "        B1_1   = np.random.normal(B1_mu_P1_1, B1_sigma_P1_1)\n",
    "        B2_1   = np.random.normal(B2_mu_P3_1, B2_sigma_P3_1)   \n",
    "        feat1  = np.random.randint(2)\n",
    "        disp1  = np.random.randint(2)\n",
    "        \n",
    "        sales_1 = np.exp(intercept_1 \\\n",
    "                + B1_1 * P_1 \\\n",
    "                + B2_1 * P_3 \\\n",
    "                + B3_mu_D1_1 * disp1 \\\n",
    "                + B4_mu_F1_1 * feat1)\n",
    "        revenue_1 = sales_1 * oz_1 * np.exp(P_1)\n",
    "        profits_1 = revenue_1 * grmar1_avg\n",
    "        \n",
    "        \n",
    "        ###########\n",
    "        #  SKU2   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_2 = np.random.normal(intercept_mu_2, intercept_sigma_2)\n",
    "        B1_2   = np.random.normal(B1_mu_P1_2, B1_sigma_P1_2)\n",
    "        B2_2   = np.random.normal(B2_mu_P2_2, B2_sigma_P2_2)   \n",
    "        feat2  = np.random.randint(2)\n",
    "        disp2  = np.random.randint(2)\n",
    "        \n",
    "        sales_2 = np.exp(intercept_2 \\\n",
    "                + B1_2 * P_1 \\\n",
    "                + B2_2 * P_2 \\\n",
    "                + B3_mu_D2_2 * disp2 \\\n",
    "                + B4_mu_F2_2 * feat2)\n",
    "        \n",
    "        revenue_2 = sales_2 * oz_2 * np.exp(P_2)\n",
    "        profits_2 = revenue_2 * grmar2_avg\n",
    "        \n",
    "                \n",
    "        ###########\n",
    "        #  SKU3   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_3 = np.random.normal(intercept_mu_3, intercept_sigma_3)\n",
    "        B1_3   = np.random.normal(B1_mu_P1_3, B1_sigma_P1_3)\n",
    "        B2_3   = np.random.normal(B2_mu_P3_3, B2_sigma_P3_3)   \n",
    "        B3_3   = np.random.normal(B3_mu_P4_3, B3_sigma_P4_3) \n",
    "        feat3  = np.random.randint(2)\n",
    "        disp3  = np.random.randint(2)\n",
    "        \n",
    "        sales_3 = np.exp(intercept_3 \\\n",
    "                + B1_3 * P_1 \\\n",
    "                + B2_3 * P_3 \\\n",
    "                + B3_3 * P_4 \\\n",
    "                + B4_mu_D3_3 * disp3 \\\n",
    "                + B5_mu_F3_3 * feat3)\n",
    "        \n",
    "        revenue_3 = sales_3 * oz_3 * np.exp(P_3)\n",
    "        profits_3 = revenue_3 * grmar3_avg\n",
    "        \n",
    "        \n",
    "        ###########\n",
    "        #  SKU4   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_4 = np.random.normal(intercept_mu_4, intercept_sigma_4)\n",
    "        B1_4   = np.random.normal(B1_mu_P1_4, B1_sigma_P1_4)\n",
    "        B2_4   = np.random.normal(B2_mu_P3_4, B2_sigma_P3_4)   \n",
    "        B3_4   = np.random.normal(B3_mu_P4_4, B3_sigma_P4_5) \n",
    "        B4_4   = np.random.normal(B4_mu_P5_5, B4_sigma_P5_5)\n",
    "        feat4  = np.random.randint(2)\n",
    "        disp4  = np.random.randint(2)\n",
    "        \n",
    "        sales_4 = np.exp(intercept_4 \\\n",
    "                + B1_4 * P_1 \\\n",
    "                + B2_4 * P_3 \\\n",
    "                + B3_4 * P_4 \\\n",
    "                + B4_4 * P_5 \\\n",
    "                + B5_mu_D4_4 * disp4 \\\n",
    "                + B6_mu_F4_4 * feat4)\n",
    "        \n",
    "        revenue_4 = sales_4 * oz_4 * np.exp(P_4)\n",
    "        profits_4 = revenue_4 * grmar4_avg\n",
    "        \n",
    "        \n",
    "        ###########\n",
    "        #  SKU5   # \n",
    "        ###########\n",
    "        \n",
    "        intercept_5 = np.random.normal(intercept_mu_5, intercept_sigma_5)\n",
    "        B1_5   = np.random.normal(B1_mu_P2_5, B1_sigma_P2_5)\n",
    "        B2_5   = np.random.normal(B2_mu_P3_5, B2_sigma_P3_5)   \n",
    "        B3_5   = np.random.normal(B3_mu_P4_5, B3_sigma_P4_5) \n",
    "        B4_5   = np.random.normal(B4_mu_P5_5, B4_sigma_P5_5) \n",
    "        feat5  = np.random.randint(2)\n",
    "        disp5  = np.random.randint(2)\n",
    "        \n",
    "        sales_5 = np.exp(intercept_5 \\\n",
    "                + B1_5 * P_2 \\\n",
    "                + B2_5 * P_3 \\\n",
    "                + B3_5 * P_4 \\\n",
    "                + B4_5 * P_5 \\\n",
    "                + B5_mu_D5_5 * disp5 \\\n",
    "                + B6_mu_F5_5 * feat5)\n",
    "        \n",
    "        revenue_5 = sales_5 * oz_5 * np.exp(P_5)\n",
    "        profits_5 = revenue_5 * grmar5_avg\n",
    "        \n",
    "        \n",
    "        ####################\n",
    "        #  Appending SKUs  # \n",
    "        ####################\n",
    "        \n",
    "        \n",
    "        all_stats.append([sales_5, revenue_5, profits_5, disp5, feat5, \n",
    "                          sales_4, revenue_4, profits_4, disp4, feat4, \n",
    "                          sales_3, revenue_3, profits_3, disp3, feat3,\n",
    "                          sales_2, revenue_2, profits_2, disp2, feat2,\n",
    "                          sales_1, revenue_1, profits_1, disp1, feat1,])\n",
    "        \n",
    "           \n",
    "    results_df = pd.DataFrame.from_records(all_stats, columns =\n",
    "    ['units_sold_5','revenue_5','profits_5','disp_5','feat_5',\n",
    "     'units_sold_4','revenue_4','profits_4','disp_4','feat_4',\n",
    "     'units_sold_3','revenue_3','profits_3','disp_3','feat_3',\n",
    "     'units_sold_2','revenue_2','profits_2','disp_2','feat_2',\n",
    "     'units_sold_1','revenue_1','profits_1','disp_1','feat_1'])\n",
    "        \n",
    "    final_stats.append([np.exp(P_5), np.exp(P_4), np.exp(P_3),\n",
    "                        np.exp(P_2), np.exp(P_1),\n",
    "                        results_df['profits_5'].mean(),\n",
    "                        results_df['profits_4'].mean(),\n",
    "                        results_df['profits_3'].mean(),\n",
    "                        results_df['profits_2'].mean(),\n",
    "                        results_df['profits_1'].mean(),\n",
    "                        results_df['feat_5'].value_counts().idxmax(), # most frequent value\n",
    "                        results_df['feat_4'].value_counts().idxmax(),\n",
    "                        results_df['feat_3'].value_counts().idxmax(),\n",
    "                        results_df['feat_2'].value_counts().idxmax(),\n",
    "                        results_df['feat_1'].value_counts().idxmax(),\n",
    "                        results_df['disp_5'].value_counts().idxmax(),\n",
    "                        results_df['disp_4'].value_counts().idxmax(),\n",
    "                        results_df['disp_3'].value_counts().idxmax(),\n",
    "                        results_df['disp_2'].value_counts().idxmax(),\n",
    "                        results_df['disp_1'].value_counts().idxmax()])\n",
    "    \n",
    "final_stats_df = pd.DataFrame.from_records(final_stats, columns =\n",
    "                ['Price per Oz_5', 'Price per Oz_4',\n",
    "                 'Price per Oz_3', 'Price per Oz_2', 'Price per Oz_1',\n",
    "                 'Profits_5', 'Profits_4', \n",
    "                 'Profits_3', 'Profits_2', 'Profits_1',\n",
    "                 'Feat_5', 'Feat_4', 'Feat_3', 'Feat_2', 'Feat_1',\n",
    "                 'Disp_5', 'Disp_4', 'Disp_3', 'Disp_2', 'Disp_1'])\n",
    "\n",
    "final_stats_df['Total Profits'] = final_stats_df['Profits_5']\\\n",
    "                                + final_stats_df['Profits_4']\\\n",
    "                                + final_stats_df['Profits_3']\\\n",
    "                                + final_stats_df['Profits_2']\\\n",
    "                                + final_stats_df['Profits_1']\n",
    "\n",
    "\n",
    "final_stats_df\n",
    "\n",
    "# # Plot scatterplot\n",
    "# final_stats_df.plot.scatter(x = \"Price per Oz_5\", y = \"Profits_5\");\n",
    "# final_stats_df.plot.scatter(x = \"Price per Oz_5\", y = \"Total Profits\");"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 65,
   "metadata": {
    "ExecuteTime": {
     "end_time": "2021-03-27T20:31:18.327209Z",
     "start_time": "2021-03-27T20:31:18.316985Z"
    }
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Price per Oz_5</th>\n",
       "      <th>Price per Oz_4</th>\n",
       "      <th>Price per Oz_3</th>\n",
       "      <th>Price per Oz_2</th>\n",
       "      <th>Price per Oz_1</th>\n",
       "      <th>Profits_5</th>\n",
       "      <th>Profits_4</th>\n",
       "      <th>Profits_3</th>\n",
       "      <th>Profits_2</th>\n",
       "      <th>Profits_1</th>\n",
       "      <th>Feat_5</th>\n",
       "      <th>Feat_4</th>\n",
       "      <th>Feat_3</th>\n",
       "      <th>Feat_2</th>\n",
       "      <th>Feat_1</th>\n",
       "      <th>Disp_5</th>\n",
       "      <th>Disp_4</th>\n",
       "      <th>Disp_3</th>\n",
       "      <th>Disp_2</th>\n",
       "      <th>Disp_1</th>\n",
       "      <th>Total Profits</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>0.164102</td>\n",
       "      <td>0.192644</td>\n",
       "      <td>0.237824</td>\n",
       "      <td>0.254708</td>\n",
       "      <td>0.212976</td>\n",
       "      <td>1086.808105</td>\n",
       "      <td>512219.923787</td>\n",
       "      <td>315.886571</td>\n",
       "      <td>484.153065</td>\n",
       "      <td>504.080334</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>514610.851863</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   Price per Oz_5  Price per Oz_4  Price per Oz_3  Price per Oz_2  \\\n",
       "9        0.164102        0.192644        0.237824        0.254708   \n",
       "\n",
       "   Price per Oz_1    Profits_5      Profits_4   Profits_3   Profits_2  \\\n",
       "9        0.212976  1086.808105  512219.923787  315.886571  484.153065   \n",
       "\n",
       "    Profits_1  Feat_5  Feat_4  Feat_3  Feat_2  Feat_1  Disp_5  Disp_4  Disp_3  \\\n",
       "9  504.080334       1       1       1       1       1       1       0       0   \n",
       "\n",
       "   Disp_2  Disp_1  Total Profits  \n",
       "9       1       1  514610.851863  "
      ]
     },
     "execution_count": 65,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Identify Best Pricing & Marketing Settings for Maximum Profit for SKU5\n",
    "index = final_stats_df.loc[final_stats_df['Total Profits'] == final_stats_df['Total Profits'].max(),:].index\n",
    "final_stats_df.iloc[index,:]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "import matplotlib.pyplot as plt\n",
    "import seaborn as sns\n",
    "\n",
    "plt.figure(figsize=(9, 5))\n",
    "\n",
    "sns.set_style('ticks')\n",
    "sns.set_context('talk', font_scale = 0.7)\n",
    "sns.set_palette('tab20c')\n",
    "\n",
    "ax = sns.scatterplot(x = 'VARIETY_OF_ORDERS',\n",
    "                     y = 'REVENUE',\n",
    "                     data  = chefs,\n",
    "                     alpha = 0.8);\n",
    "\n",
    "ax.set_ylabel('Revenue ($)')\n",
    "ax.set_xlabel('Variety of Orders (%)')\n",
    "ax.set_title('Negative Effect of Order Variety on Revenue', size = 14)\n",
    "\n",
    "\n",
    "xlabels = ['{:.0f}'.format(x) + \"%\" for x in ax.get_xticks()*100]\n",
    "ax.set_xticklabels(xlabels)\n",
    "ylabels = [\"$ \"+ '{:,.0f}'.format(x) for x in ax.get_yticks()]\n",
    "ax.set_yticklabels(ylabels)\n",
    "ax.axvline(x     = 0.1,\n",
    "           color = 'r',\n",
    "           ls  = '--')\n",
    "ax.axvline(x     = 0.2,\n",
    "           color = 'r',\n",
    "           ls  = '--')\n",
    "\n",
    "plt.savefig('./_images/scaterplot_revenue_and_order_variety.png')\n",
    "plt.show()"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.5"
  },
  "toc": {
   "base_numbering": 1,
   "nav_menu": {},
   "number_sections": false,
   "sideBar": true,
   "skip_h1_title": false,
   "title_cell": "Table of Contents",
   "title_sidebar": "Contents",
   "toc_cell": false,
   "toc_position": {
    "height": "calc(100% - 180px)",
    "left": "10px",
    "top": "150px",
    "width": "256px"
   },
   "toc_section_display": true,
   "toc_window_display": true
  },
  "varInspector": {
   "cols": {
    "lenName": 16,
    "lenType": 16,
    "lenVar": 40
   },
   "kernels_config": {
    "python": {
     "delete_cmd_postfix": "",
     "delete_cmd_prefix": "del ",
     "library": "var_list.py",
     "varRefreshCmd": "print(var_dic_list())"
    },
    "r": {
     "delete_cmd_postfix": ") ",
     "delete_cmd_prefix": "rm(",
     "library": "var_list.r",
     "varRefreshCmd": "cat(var_dic_list()) "
    }
   },
   "types_to_exclude": [
    "module",
    "function",
    "builtin_function_or_method",
    "instance",
    "_Feature"
   ],
   "window_display": false
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
